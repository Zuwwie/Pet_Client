/* ========== ADMIN LAYOUT ========== */
.admin {
    max-width: 1180px;
    margin: 16px auto 48px;
    padding: 0 16px;
}
.admin * { box-sizing: border-box; }

.admin__top {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 16px;
    margin-bottom: 12px;
}
.admin__title { font-size: 28px; font-weight: 800; margin: 0; }
.admin__tabs { display: flex; gap: 8px; }
.admin__tab {
    padding: 10px 14px;
    border-radius: 12px;
    border: 1px solid #e5e7eb;
    background: #fff;
    color: #0f172a;
    font-weight: 700;
    font-size: 14px;
}
.admin__tab--active { background:#0f172a; color:#fff; border-color:#0f172a; }
.admin__content { display:block; }
.muted { color:#6b7280; }

/* Card for loader/messages */
.admin__card{
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:12px;
    padding:14px 16px;
}

/* ========== BUTTONS ========== */
.btn{
    --bg:#fff; --fg:#0f172a; --bd:#e5e7eb;
    display:inline-flex; align-items:center; justify-content:center; gap:.5rem;
    height:44px; padding:0 18px; border-radius:999px; border:1px solid var(--bd);
    background:var(--bg); color:var(--fg); font-weight:700; line-height:1;
    box-shadow:0 1px 2px rgba(15,23,42,.04);
    transition:background-color .2s,color .2s,border-color .2s,box-shadow .2s,transform .06s;
}
.btn:hover{ background:#f3f4f6; }
.btn:active{ transform:translateY(1px); }
.btn:disabled{ opacity:.6; cursor:not-allowed; }
.btn:focus-visible{ outline:none; box-shadow:0 0 0 3px rgba(59,130,246,.35); }

.btn-primary{
    --bg:#0f172a; --fg:#fff; --bd:#0f172a;
    background:linear-gradient(180deg,#121a34 0%,#0f172a 100%);
    color:#fff; border-color:#0f172a;
    box-shadow:0 8px 20px rgba(15,23,42,.25);
}
.btn-primary:hover{ background:linear-gradient(180deg,#0f1b38 0%,#0c1322 100%); }

.btn-danger{
    --bg:#ef4444; --fg:#fff; --bd:#ef4444;
    background:linear-gradient(180deg,#f87171 0%,#ef4444 100%);
    color:#fff; border-color:#ef4444;
    box-shadow:0 8px 20px rgba(239,68,68,.25);
}
.btn-danger:hover{ background:linear-gradient(180deg,#f05252 0%,#dc2626 100%); }

.btn-x{
    width:40px; height:40px; display:inline-grid; place-items:center;
    border-radius:999px; border:1px solid #e5e7eb; background:#fff;
}
.btn-x:hover{ background:#f3f4f6; }

/* compact button in table */
.btn-edit{
    height:30px; padding:0 10px;
    border-radius:10px; border:1px solid #e5e7eb;
    background:#fff; font-weight:800; cursor:pointer;
}
.btn-edit:hover{ background:#f8fafc; }

/* ========== TOOLBAR / SEARCH ========== */
.admin-toolbar{ display:flex; align-items:center; gap:12px; margin:8px 0 12px; }

.admin-search{ position:relative; display:flex; align-items:center; width:min(360px,60vw); }
.admin-search .icon{ position:absolute; left:10px; width:16px; height:16px; opacity:.55; }
.admin-search__input{
    width:100%; height:36px; padding:0 32px 0 34px;
    border:1px solid #e5e7eb; border-radius:10px; background:#fff;
    transition:border-color .12s, box-shadow .12s;
}
.admin-search__input:focus{
    outline:none; border-color:#38bdf8; box-shadow:0 0 0 3px rgba(56,189,248,.22);
}
.admin-search__clear{
    position:absolute; right:6px; width:26px; height:26px;
    border-radius:8px; border:1px solid #e5e7eb; background:#fff; cursor:pointer;
}
.admin-search__clear:hover{ background:#f8fafc; }

/* ========== CANDIES GRID “TABLE” ========== */
.admin-table{ display:grid; gap:8px; }

/* 10 columns: name, category, g/pc, kg(buy), kg(sell), pc(buy), pc(sell), markup, avail, action */
.admin-row{
    display:grid; align-items:center; column-gap:8px;
    grid-template-columns: 2fr .9fr .6fr .9fr .9fr .9fr .9fr .8fr .6fr 1fr;
    background:#fff; border-radius:12px; box-shadow:0 1px 2px rgba(0,0,0,.06);
    padding:8px 12px; transition: box-shadow .2s ease, background-color .2s ease;
}
.admin-row--head{ background:transparent; box-shadow:none; padding:0; }
.admin-row:not(.admin-row--head):hover{
    background:rgba(80,161,243,.08); box-shadow:0 2px 8px rgba(0,0,0,.08);
}

.cell{ min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; font-variant-numeric:tabular-nums; }
.cell--num{ text-align:right; }
.cell--avail{ text-align:center; text-transform:lowercase; }
.cell--avail.ok{ color:#15803d; }
.cell--avail.bad{ color:#b91c1c; }
.cell--act{ justify-self:end; display:flex; align-items:center; gap:8px; }

/* Sortable headers */
.th{
    all:unset; display:flex; align-items:center; gap:6px; width:100%;
    font:700 15px/1.1 system-ui; color:#0f172a; cursor:pointer; padding:4px 2px; border-radius:6px;
}
.th:focus-visible{ outline:2px solid #38bdf8; outline-offset:2px; }
.th::after{ content:"↕"; font-size:12px; opacity:.45; }
.th[data-dir="asc"]::after{ content:"▲"; opacity:1; }
.th[data-dir="desc"]::after{ content:"▼"; opacity:1; }

/* Responsive hiding of less critical columns */
@media (max-width:1200px){ .col-kgb, .col-pcb { display:none; } }
@media (max-width:900px){ .col-cat { display:none; } }
@media (max-width:760px){ .col-w { display:none; } }
@media (max-width:640px){ .col-markup { display:none; } }

/* ========== MODAL ========== */
body.has-modal { overflow: hidden; }

.modal-overlay{
    position: fixed; inset: 0; z-index: 1100;
    background: rgba(15,23,42,.55);
    backdrop-filter: saturate(120%) blur(2px);
    display: grid; place-items: center; padding: 16px;
}
.modal{
    width: min(920px, calc(100vw - 32px));
    max-height: calc(100vh - 32px);
    background:#fff; border-radius:16px; box-shadow:0 20px 50px rgba(0,0,0,.25);
    display:grid; grid-template-rows: auto 1fr auto; overflow:hidden;
}
.modal__top{
    display:flex; align-items:center; justify-content:space-between; gap:12px;
    padding:14px 16px; border-bottom:1px solid #e5e7eb; position:sticky; top:0; background:#fff; z-index:1;
}
.modal__body{ padding:16px; overflow:auto; }
.modal__actions{
    display:flex; gap:8px; align-items:center; padding:12px 16px;
    border-top:1px solid #e5e7eb; position:sticky; bottom:0; background:#fff; z-index:1;
}
@supports (height: 100dvh){
    .modal-overlay{ min-height:100dvh; }
    .modal{ max-height:calc(100dvh - 32px); }
}

/* ========== FORM IN MODAL ========== */
.form2{ display:grid; grid-template-columns:1fr 1fr; gap:12px; }
.form2 .span2{ grid-column:1 / -1; }
.form2 label{ display:grid; gap:6px; }
.form2 label span{ font-weight:700; font-size:14px; color:#0f172a; }
.form2 input{
    width:100%; border:1px solid #e5e7eb; border-radius:12px; padding:10px 12px; font-size:14px;
    transition:border-color .12s, box-shadow .12s;
}
.form2 input:focus{ outline:none; border-color:#38bdf8; box-shadow:0 0 0 3px rgba(56,189,248,.22); }

.seg-wrap{ display:flex; align-items:center; gap:12px; margin:6px 0; }
.field-label{ font-weight:700; font-size:14px; }
.seg{ display:inline-flex; gap:4px; padding:4px; border:1px solid #e5e7eb; border-radius:999px; background:#f3f4f6; }
.seg-btn{ border:0; background:transparent; cursor:pointer; padding:8px 16px; border-radius:999px; font-weight:700; color:#0f172a; }
.seg-btn.is-active{ background:#0f172a; color:#fff; }
.seg-btn:active{ transform:translateY(1px); }

.preview{ margin-top:6px; display:flex; gap:16px; flex-wrap:wrap; color:#0f172a; }
.error{ padding:10px 12px; border-radius:10px; background:#fee2e2; color:#991b1b; margin-bottom:12px; }

@media (max-width:520px){
    .modal{ width:calc(100vw - 16px); max-height:calc(100vh - 16px); border-radius:14px; }
    .form2{ grid-template-columns:1fr; }
}

/* ========== AVAILABILITY SWITCH (.asw) — clean, textless ========== */
.asw{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    padding:0;
    margin:0;
    border:0;
    background:transparent;
    cursor:pointer;
    -webkit-tap-highlight-color:transparent;
    line-height:1;
}
.asw:focus-visible{
    outline:2px solid #38bdf8;
    outline-offset:2px;
}
.asw[disabled]{
    opacity:.5;
    cursor:not-allowed;
}

/* ========== AVAILABILITY SWITCH (.asw) — clean, textless ========== */
.asw{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    margin: 0;
    border: 0;
    background: transparent;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    line-height: 1;
}
.asw:focus-visible{
    outline: 2px solid #38bdf8;
    outline-offset: 2px;
}
.asw[disabled]{
    opacity: .5;
    cursor: not-allowed;
}

/* track */
.asw__track{
    position: relative;
    width: 44px;
    height: 24px;
    border-radius: 999px;
    background: #fee2e2;         /* OFF */
    border: 1px solid #fecaca;
    transition: background .2s, border-color .2s;
}

/* thumb */
.asw__thumb{
    position: absolute;
    top: 2px;
    left: 2px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: #fca5a5;         /* OFF */
    box-shadow: 0 1px 2px rgba(0,0,0,.15);
    transition: transform .2s ease, background .2s;
}

/* ON state */
.asw--on .asw__track{
    background: #dcfce7;         /* ON */
    border-color: #bbf7d0;
}
.asw--on .asw__thumb{
    transform: translateX(20px);
    background: #86efac;
}

